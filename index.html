<!DOCTYPE html>
<html lang="en">
<head>
    <title>Mary Gray Bird Sanctuary</title>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1"/>
    <meta name="description" content=""/>

    <link rel="stylesheet" href="https://js.arcgis.com/4.25/esri/themes/light/main.css">
    <script src="https://js.arcgis.com/4.25/"></script>
    <link rel="stylesheet" href="css/style.css"/>

    <script>
      require([
        "esri/config",
        "esri/Map",
        "esri/views/MapView",
        "esri/layers/FeatureLayer",
         "esri/widgets/Editor",
         "esri/widgets/Legend"
      ], function(esriConfig, Map, MapView, FeatureLayer, Editor, Legend) {

        esriConfig.apiKey = "AAPK8b5e89b6abdb4cf59e681ac4b1ef4a1639R-ZEBONVblfVqtCv_mIrYVKQGVD_FDl3X8eCfyhNCTyuvnnQADJtsuLJbNKOBq";
        const map = new Map({
          basemap: "arcgis-imagery"
        });

        const view = new MapView({
          map: map,
          center: [-85.229, 39.588], // Longitude, latitude
          zoom: 15, // Zoom level
          container: "viewDiv" // Div element
        });

          const sanctuaryRenderer = {
              "type": "simple",
              "symbol": {
                  "type": "simple-fill",

                  "color": "transparent",
                  "outline": {
                      "width": 2,
                      "color": "#0A3D04"
                  }
              }
          };

        //create constructors for feature layers and add to map
        const sanctuaryLayer = new FeatureLayer({
          url: "https://services.arcgis.com/HRPe58bUyBqyyiCt/arcgis/rest/services/sanctuary/FeatureServer",
          renderer: sanctuaryRenderer
        });

        const facilitiesRenderer = {
            "type": "simple",
            "symbol": {
                "type": "simple-marker",
                "color": "grey",
                "outline": "white",
                "size": "9px",
            }
        }

          const facilitiesPopup = {
              title: "{Name}",
              content: "{FacilityType}"
          }

          const facilitiesLabels = {
              symbol: {
                  type: "text",
                  color: "#FFFFFF",
                  haloColor: "#5E8D74",
                  haloSize: "2px",
                  font: {
                      size: "12px",
                      family: "Noto Sans",
                      style: "italic",
                      weight: "normal"
                  }
              },
              labelPlacement: "above-center",
              labelExpressionInfo: {
                  expression: "$feature.Name"
              }
          };

          const facilitiesLayer = new FeatureLayer({
          url: "https://services.arcgis.com/HRPe58bUyBqyyiCt/arcgis/rest/services/sanctuaryFacilities/FeatureServer",
          renderer: facilitiesRenderer,
          //labelingInfo: [facilitiesLabels],
          popupTemplate: facilitiesPopup
        });

          // const trailsRenderer = {
          //     "type": "simple",
          //     "symbol": {
          //         "type": "simple-marker",
          //         "color": "grey",
          //         "outline": "white",
          //         "size": "9px",
          //     }
          // }

          const trailsPopup = {
              title: "{namealtern}"
          }

          const trailsLayer = new FeatureLayer({
          url: "https://services.arcgis.com/HRPe58bUyBqyyiCt/arcgis/rest/services/sanctuaryTrails/FeatureServer",
          popupTemplate: trailsPopup
        });

        const reportsRenderer = {
              "type": "simple",
              "symbol": {
                  "type": "simple-marker",
                  "color": "orange",
                  "outline": "white",
                  "size": "9px",
              }
          }

        const reportsLayer = new FeatureLayer({
          url: "https://services.arcgis.com/HRPe58bUyBqyyiCt/arcgis/rest/services/trailReports/FeatureServer",
          renderer: reportsRenderer
        });

        const sightingsRenderer = {
            "type": "simple",
            "symbol": {
                "type": "simple-marker",
                "size": "10px",
                "color": "PaleGreen",
                "width": "7px",
                "height": "7px"
            }
        }

          const sightingsPopup = {
              title: "Species: {Species}",
              content: "Date: {Date} <br> Near: {Near} <br> Description: {Description}"
          }

        const sightingsLayer = new FeatureLayer({
          url: "https://services.arcgis.com/HRPe58bUyBqyyiCt/arcgis/rest/services/birdSightings/FeatureServer",
          renderer: sightingsRenderer,
          popupTemplate: sightingsPopup
        })

        map.add(sanctuaryLayer);
        map.add(facilitiesLayer);
        map.add(trailsLayer);
        map.add(reportsLayer);
        map.add(sightingsLayer);

        const pointInfos = {
              layer: sightingsLayer, reportsLayer
          }

          const editor = new Editor({
              view: view,
              layerInfos: [pointInfos]
          });

          view.ui.add(editor, "bottom-right");

        const legend = new Legend({
            view: view
        })

      view.ui.add(legend, "top-left")

      });
    </script>

    <style>
      html,
      body,
      #viewDiv {
        padding: 0;
        margin: 0;
        height: 90%;
        width: 90%;
      }
    </style>


</head>
<body>
    <div id="head-desc"> <h1 style="color:white;
    font-size: 1.8em;
    text-align: left;
    line-height: normal;
    margin-top:1%; m
    argin-bottom: 1%;
    margin-left:1% ">Mary Gray Bird Sanctuary</h1></div>
    <br>

  <div id="viewDiv" ></div>


    <br>

    <div>The Mary Gray Bird Sanctuary is owned and operated by the Indiana Audubon Society and is located south of Connersville in Fayette County.
        Alice Green Gray gave the initial 264 acre property to the Indiana Audubon Society in 1943 as a living memorial to her daughter Mary, who preceded her in death.  Congressman Finley H. Gray willed additional property to the society in 1947, bringing the total to more than 600 acres. Gifts from members have allowed the acquisition of more property so that the Sanctuary now occupies more than 700 acres.
        Visitors are welcome to the property from dawn to dusk. Rustic camping and fishing is available to Indiana Audubon members (check in at Caretaker residence or check in online with Operations Manager prior to arrival).  Join Indiana Audubon Here.
        Mary Gray Bird Sanctuary needs your help! We are always looking for extra hands to help with projects on the property. If youâ€™re interested in helping out, whether long-term or just for a day, fill out our Indiana Audubon volunteer interest form today!
    </div>

</body>
</html>